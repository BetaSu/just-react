(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{375:function(t,e,a){"use strict";a.r(e);var n=a(43),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("ç»è¿‡äº”ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬ç»ˆäºå›åˆ°äº†"),a("code",[t._v("React")]),t._v("åº”ç”¨çš„èµ·ç‚¹ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸€èŠ‚æˆ‘ä»¬å®Œæ•´çš„èµ°é€š"),a("code",[t._v("ReactDOM.render")]),t._v("å®Œæˆé¡µé¢æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åˆ›å»ºfiber"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºfiber"}},[t._v("#")]),t._v(" åˆ›å»ºfiber")]),t._v(" "),a("p",[t._v("ä»"),a("RouterLink",{attrs:{to:"/process/doubleBuffer.html#mountæ—¶"}},[t._v("åŒç¼“å­˜æœºåˆ¶ä¸€èŠ‚")]),t._v("æˆ‘ä»¬çŸ¥é“ï¼Œé¦–æ¬¡æ‰§è¡Œ"),a("code",[t._v("ReactDOM.render")]),t._v("ä¼šåˆ›å»º"),a("code",[t._v("rootFiberNode")]),t._v("å’Œ"),a("code",[t._v("rootFiber")]),t._v("ã€‚å…¶ä¸­"),a("code",[t._v("rootFiberNode")]),t._v("æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¹èŠ‚ç‚¹ï¼Œ"),a("code",[t._v("rootFiber")]),t._v("æ˜¯è¦æ¸²æŸ“ç»„ä»¶æ‰€åœ¨ç»„ä»¶æ ‘çš„"),a("code",[t._v("æ ¹èŠ‚ç‚¹")]),t._v("ã€‚")],1),t._v(" "),a("p",[t._v("è¿™ä¸€æ­¥å‘ç”Ÿåœ¨è°ƒç”¨"),a("code",[t._v("ReactDOM.render")]),t._v("åè¿›å…¥çš„"),a("code",[t._v("legacyRenderSubtreeIntoContainer")]),t._v("æ–¹æ³•ä¸­ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// containeræŒ‡ReactDOM.renderçš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå³åº”ç”¨æŒ‚è½½çš„DOMèŠ‚ç‚¹ï¼‰")]),t._v("\nroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_reactRootContainer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("legacyCreateRootFromDOMContainer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  container"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  forceHydrate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfiberRoot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_internalRoot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("ä½ å¯ä»¥ä»"),a("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-dom/src/client/ReactDOMLegacy.js#L193",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),a("OutboundLink")],1),t._v("çœ‹åˆ°è¿™ä¸€æ­¥çš„ä»£ç ")])]),t._v(" "),a("p",[a("code",[t._v("legacyCreateRootFromDOMContainer")]),t._v("æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨"),a("code",[t._v("createFiberRoot")]),t._v("æ–¹æ³•å®Œæˆ"),a("code",[t._v("rootFiberNode")]),t._v("å’Œ"),a("code",[t._v("rootFiber")]),t._v("çš„åˆ›å»ºä»¥åŠå…³è”ã€‚å¹¶åˆå§‹åŒ–"),a("code",[t._v("updateQueue")]),t._v("ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createFiberRoot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("containerInfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" RootTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hydrate"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hydrationCallbacks"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" SuspenseHydrationCallbacks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FiberRoot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºrootFiberNode")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" FiberRoot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FiberRootNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("containerInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hydrate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºrootFiber")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" uninitializedFiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createHostRootFiber")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿æ¥rootFiberä¸rootFiberNode")]),t._v("\n  root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uninitializedFiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  uninitializedFiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stateNode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–updateQueue")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initializeUpdateQueue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uninitializedFiber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æ ¹æ®ä»¥ä¸Šä»£ç ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨"),a("RouterLink",{attrs:{to:"/process/doubleBuffer.html#mountæ—¶"}},[t._v("åŒç¼“å­˜æœºåˆ¶ä¸€èŠ‚")]),t._v("åŸºç¡€ä¸Šè¡¥å……ä¸Š"),a("code",[t._v("rootFiber")]),t._v("åˆ°"),a("code",[t._v("rootFiberNode")]),t._v("çš„å¼•ç”¨ã€‚")],1),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/fiberroot.png"),alt:"fiberRoot"}}),t._v(" "),a("blockquote",[a("p",[t._v("ä½ å¯ä»¥ä»"),a("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberRoot.new.js#L97",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),a("OutboundLink")],1),t._v("çœ‹åˆ°è¿™ä¸€æ­¥çš„ä»£ç ")])]),t._v(" "),a("h2",{attrs:{id:"åˆ›å»ºupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºupdate"}},[t._v("#")]),t._v(" åˆ›å»ºupdate")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å·²ç»åšå¥½äº†ç»„ä»¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œæ¥ä¸‹æ¥å°±ç­‰å¾…åˆ›å»º"),a("code",[t._v("Update")]),t._v("æ¥å¼€å¯ä¸€æ¬¡æ›´æ–°ã€‚")]),t._v(" "),a("p",[t._v("è¿™ä¸€æ­¥å‘ç”Ÿåœ¨"),a("code",[t._v("updateContainer")]),t._v("æ–¹æ³•ä¸­ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateContainer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("element"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ReactNodeList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  container"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" OpaqueRoot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parentComponent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("React$Component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  callback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("Function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Lane "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...çœç•¥ä¸é€»è¾‘ä¸ç›¸å…³ä»£ç ")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆ›å»ºupdate")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" update "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eventTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lane"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" suspenseConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// update.payloadä¸ºéœ€è¦æŒ‚è½½åœ¨æ ¹èŠ‚ç‚¹çš„ç»„ä»¶")]),t._v("\n  update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("payload "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// callbackä¸ºReactDOM.renderçš„ç¬¬ä¸‰ä¸ªå‚æ•° â€”â€” å›è°ƒå‡½æ•°")]),t._v("\n  callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å°†ç”Ÿæˆçš„updateåŠ å…¥updateQueue")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("enqueueUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è°ƒåº¦æ›´æ–°")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scheduleUpdateOnFiber")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lane"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eventTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...çœç•¥ä¸é€»è¾‘ä¸ç›¸å…³ä»£ç ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("ä½ å¯ä»¥ä»"),a("a",{attrs:{href:"https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberReconciler.new.js#L255",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),a("OutboundLink")],1),t._v("çœ‹åˆ°"),a("code",[t._v("updateContainer")]),t._v("çš„ä»£ç ")])]),t._v(" "),a("p",[t._v("å€¼å¾—æ³¨æ„çš„æ˜¯å…¶ä¸­"),a("code",[t._v("update.payload = {element};")])]),t._v(" "),a("p",[t._v("è¿™å°±æ˜¯æˆ‘ä»¬åœ¨"),a("RouterLink",{attrs:{to:"/state/update.html#updateçš„ç»“æ„"}},[t._v("Updateä¸€èŠ‚")]),t._v("ä»‹ç»çš„ï¼Œå¯¹äº"),a("code",[t._v("HostRoot")]),t._v("ï¼Œ"),a("code",[t._v("payload")]),t._v("ä¸º"),a("code",[t._v("ReactDOM.render")]),t._v("çš„ç¬¬ä¸€ä¸ªä¼ å‚ã€‚")],1),t._v(" "),a("h2",{attrs:{id:"æµç¨‹æ¦‚è§ˆ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµç¨‹æ¦‚è§ˆ"}},[t._v("#")]),t._v(" æµç¨‹æ¦‚è§ˆ")]),t._v(" "),a("p",[t._v("è‡³æ­¤ï¼Œ"),a("code",[t._v("ReactDOM.render")]),t._v("çš„æµç¨‹å°±å’Œæˆ‘ä»¬å·²çŸ¥çš„æµç¨‹è¿æ¥ä¸Šäº†ã€‚")]),t._v(" "),a("p",[t._v("æ•´ä¸ªæµç¨‹å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("åˆ›å»ºrootFiberNodeã€rootFiberã€updateQueueï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("legacyCreateRootFromDOMContainer"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nåˆ›å»ºUpdateå¯¹è±¡ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("updateContainer"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nä»fiberåˆ°rootï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("markUpdateLaneFromFiberToRoot"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nè°ƒåº¦æ›´æ–°ï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("ensureRootIsScheduled"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\nrenderé˜¶æ®µï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("performSyncWorkOnRoot"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" æˆ– "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("performConcurrentWorkOnRoot"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("v")]),t._v("\n\ncommité˜¶æ®µï¼ˆ"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("commitRoot"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("ï¼‰\n")])])]),a("h2",{attrs:{id:"reactçš„å…¶ä»–å…¥å£å‡½æ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reactçš„å…¶ä»–å…¥å£å‡½æ•°"}},[t._v("#")]),t._v(" Reactçš„å…¶ä»–å…¥å£å‡½æ•°")]),t._v(" "),a("p",[t._v("å½“å‰"),a("code",[t._v("React")]),t._v("å…±æœ‰ä¸‰ç§æ¨¡å¼ï¼š")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("legacy")]),t._v("ï¼Œè¿™æ˜¯å½“å‰"),a("code",[t._v("React")]),t._v("ä½¿ç”¨çš„æ–¹å¼ã€‚å½“å‰æ²¡æœ‰è®¡åˆ’åˆ é™¤æœ¬æ¨¡å¼ï¼Œä½†æ˜¯è¿™ä¸ªæ¨¡å¼å¯èƒ½ä¸æ”¯æŒä¸€äº›æ–°åŠŸèƒ½ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("blocking")]),t._v("ï¼Œå¼€å¯éƒ¨åˆ†"),a("code",[t._v("concurrent")]),t._v("æ¨¡å¼ç‰¹æ€§çš„ä¸­é—´æ¨¡å¼ã€‚ç›®å‰æ­£åœ¨å®éªŒä¸­ã€‚ä½œä¸ºè¿ç§»åˆ°"),a("code",[t._v("concurrent")]),t._v("æ¨¡å¼çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ã€‚")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("concurrent")]),t._v("ï¼Œé¢å‘æœªæ¥çš„å¼€å‘æ¨¡å¼ã€‚æˆ‘ä»¬ä¹‹å‰è®²çš„"),a("code",[t._v("ä»»åŠ¡ä¸­æ–­/ä»»åŠ¡ä¼˜å…ˆçº§")]),t._v("éƒ½æ˜¯é’ˆå¯¹"),a("code",[t._v("concurrent")]),t._v("æ¨¡å¼ã€‚")])])]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥ä»ä¸‹è¡¨çœ‹å‡ºå„ç§æ¨¡å¼å¯¹ç‰¹æ€§çš„æ”¯æŒï¼š")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("legacy æ¨¡å¼")]),t._v(" "),a("th",[t._v("blocking æ¨¡å¼")]),t._v(" "),a("th",[t._v("concurrent æ¨¡å¼")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/refs-and-the-dom.html#legacy-api-string-refs",target:"_blank",rel:"noopener noreferrer"}},[t._v("String Refs"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("ğŸš«**")]),t._v(" "),a("td",[t._v("ğŸš«**")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/legacy-context.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Legacy Context"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("ğŸš«**")]),t._v(" "),a("td",[t._v("ğŸš«**")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage",target:"_blank",rel:"noopener noreferrer"}},[t._v("findDOMNode"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("ğŸš«**")]),t._v(" "),a("td",[t._v("ğŸš«**")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-suspense.html#what-is-suspense-exactly",target:"_blank",rel:"noopener noreferrer"}},[t._v("Suspense"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#suspenselist",target:"_blank",rel:"noopener noreferrer"}},[t._v("SuspenseList"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[t._v("Suspense SSR + Hydration")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[t._v("Progressive Hydration")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[t._v("Selective Hydration")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[t._v("Cooperative Multitasking")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[t._v("Automatic batching of multiple setStates")]),t._v(" "),a("td",[t._v("ğŸš«*")]),t._v(" "),a("td",[t._v("âœ…")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#splitting-high-and-low-priority-state",target:"_blank",rel:"noopener noreferrer"}},[t._v("Priority-based Rendering"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-intro.html#interruptible-rendering",target:"_blank",rel:"noopener noreferrer"}},[t._v("Interruptible Prerendering"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#transitions",target:"_blank",rel:"noopener noreferrer"}},[t._v("useTransition"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#deferring-a-value",target:"_blank",rel:"noopener noreferrer"}},[t._v("useDeferredValue"),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-patterns.html#suspense-reveal-train",target:"_blank",rel:"noopener noreferrer"}},[t._v('Suspense Reveal "Train"'),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("ğŸš«")]),t._v(" "),a("td",[t._v("âœ…")])])])]),t._v(" "),a("p",[t._v("*ï¼š"),a("code",[t._v("legacy")]),t._v("æ¨¡å¼åœ¨åˆæˆäº‹ä»¶ä¸­æœ‰è‡ªåŠ¨æ‰¹å¤„ç†çš„åŠŸèƒ½ï¼Œä½†ä»…é™äºä¸€ä¸ªæµè§ˆå™¨ä»»åŠ¡ã€‚é"),a("code",[t._v("React")]),t._v("äº‹ä»¶æƒ³ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å¿…é¡»ä½¿ç”¨ "),a("code",[t._v("unstable_batchedUpdates")]),t._v("ã€‚åœ¨"),a("code",[t._v("blocking")]),t._v("æ¨¡å¼å’Œ"),a("code",[t._v("concurrent")]),t._v("æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„"),a("code",[t._v("setState")]),t._v("åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯æ‰¹å¤„ç†çš„ã€‚")]),t._v(" "),a("p",[t._v("**ï¼šä¼šåœ¨å¼€å‘ä¸­å‘å‡ºè­¦å‘Šã€‚")]),t._v(" "),a("p",[t._v("æ¨¡å¼çš„å˜åŒ–å½±å“æ•´ä¸ªåº”ç”¨çš„å·¥ä½œæ–¹å¼ï¼Œæ‰€ä»¥æ— æ³•åªé’ˆå¯¹æŸä¸ªç»„ä»¶å¼€å¯ä¸åŒæ¨¡å¼ã€‚")]),t._v(" "),a("p",[t._v("åŸºäºæ­¤åŸå› ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçš„"),a("code",[t._v("å…¥å£å‡½æ•°")]),t._v("å¼€å¯ä¸åŒæ¨¡å¼ï¼š")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("legacy")]),t._v(" -- "),a("code",[t._v("ReactDOM.render(<App />, rootNode)")])]),t._v(" "),a("li",[a("code",[t._v("blocking")]),t._v(" -- "),a("code",[t._v("ReactDOM.createBlockingRoot(rootNode).render(<App />)")])]),t._v(" "),a("li",[a("code",[t._v("concurrent")]),t._v(" -- "),a("code",[t._v("ReactDOM.createRoot(rootNode).render(<App />)")])])]),t._v(" "),a("blockquote",[a("p",[t._v("ä½ å¯ä»¥åœ¨"),a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/concurrent-mode-adoption.html#why-so-many-modes",target:"_blank",rel:"noopener noreferrer"}},[t._v("è¿™é‡Œ"),a("OutboundLink")],1),t._v("çœ‹åˆ°"),a("code",[t._v("React")]),t._v("å›¢é˜Ÿè§£é‡Šä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šæ¨¡å¼")])]),t._v(" "),a("p",[t._v("è™½ç„¶ä¸åŒæ¨¡å¼çš„"),a("code",[t._v("å…¥å£å‡½æ•°")]),t._v("ä¸åŒï¼Œä½†æ˜¯ä»–ä»¬ä»…å¯¹"),a("code",[t._v("fiber.mode")]),t._v("å˜é‡äº§ç”Ÿå½±å“ï¼Œå¯¹æˆ‘ä»¬åœ¨"),a("RouterLink",{attrs:{to:"/state/reactdom.html#æµç¨‹æ¦‚è§ˆ"}},[t._v("æµç¨‹æ¦‚è§ˆ")]),t._v("ä¸­æè¿°çš„æµç¨‹å¹¶æ— å½±å“ã€‚")],1)])}),[],!1,null,null,null);e.default=r.exports}}]);